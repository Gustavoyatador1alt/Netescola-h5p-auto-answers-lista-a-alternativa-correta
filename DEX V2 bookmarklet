javascript:(function(){'use strict';(function addEruda(){if(window.eruda)return;const s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/eruda';s.onload=()=>{eruda.init()};document.body.appendChild(s)})();const clean=h=>String(h||'').replace(/<[^>]*>/g,' ').replace(/&nbsp;/g,' ').replace(/\s+/g,' ').trim();const tryParse=s=>{try{return typeof s==='string'?JSON.parse(s):s}catch{return null}};const pullParams=o=>(o.params&&(o.params.answers||o.params.question)?o.params:o);const normalize=s=>String(s||'').toLowerCase().replace(/\s+/g,' ').trim();function createBox(d=document){if(d.getElementById('h5p-box'))return d.getElementById('h5p-box');const b=d.createElement('div');b.id='h5p-box';Object.assign(b.style,{position:'fixed',top:'60px',left:'20px',minWidth:'250px',maxWidth:'400px',background:'#2c3e50',color:'white',border:'2px solid #34495e',borderRadius:'8px',padding:'8px 12px',fontSize:'13px',lineHeight:'1.4',zIndex:'999999',boxShadow:'0 2px 8px rgba(0,0,0,0.3)'});b.innerHTML='<b>‚úÖ Respostas:</b><br><i>Aguardando...</i>';d.body.appendChild(b);makeDraggable(b);return b}function makeDraggable(e){let ox=0,oy=0,mx=0,my=0;e.onmousedown=function(ev){ev.preventDefault();mx=ev.clientX;my=ev.clientY;document.onmouseup=()=>{document.onmouseup=null;document.onmousemove=null};document.onmousemove=function(ev){ev.preventDefault();const dx=mx-ev.clientX,dy=my-ev.clientY;mx=ev.clientX;my=ev.clientY;e.style.top=(e.offsetTop-dy)+'px';e.style.left=(e.offsetLeft-dx)+'px'}}}function extractRows(d=document){const rows=[];const pushFromParams=r=>{const p=pullParams(r||{});const q=clean(p.question||p.prompt||p.stem||p.title||'');(Array.isArray(p.answers)?p.answers:[]).forEach((a,i)=>{const c=a.correct===!0||a.isCorrect===!0||a.correctAnswer===!0;rows.push({question:q,idx:i,letter:String.fromCharCode(65+i),text:clean(a.text||a.label||a.content||''),correct:c})})};const HI=d.defaultView?.H5PIntegration;if(HI?.contents)Object.values(HI.contents).forEach(v=>{if(String(v.library||'').split(' ')[0]==='H5P.MultiChoice'){const p=tryParse(v.jsonContent)||v.content||tryParse(v.params)||null;pushFromParams(p)}});const H5P=d.defaultView?.H5P;if(H5P&&Array.isArray(H5P.instances))H5P.instances.forEach(inst=>{const lib=inst.libraryInfo?.machineName||inst.library?.machineName||inst?.constructor?.name;if(lib==='H5P.MultiChoice'){const p=inst.options||inst.params||inst.contentData?.params||{};pushFromParams(p)}});return rows}function autoAnswer(rows,d=document){const c=rows.filter(r=>r.correct);const opts=d.querySelectorAll('.h5p-answer,.h5p-multi-choice-answer');c.forEach(r=>{opts.forEach(o=>{const t=(o.innerText||o.textContent||'').trim();if(normalize(t)===normalize(r.text)||t.includes(r.text)){if(!o.classList.contains('answered')){o.click();o.classList.add('answered');console.log('üü¢ Marcando:',t)}}})});const chk=d.querySelector('.h5p-question-check-answer,.h5p-multi-choice-submit');if(chk&&!chk.disabled)chk.click()}const responded=(d=document)=>!d.querySelector('.h5p-question-check-answer,.h5p-multi-choice-submit');function autoClickNext(d=document){if(!responded(d))return;const b=[...d.querySelectorAll('button.nui-button.nui-button-medium.nui-button-curved.nui-button-solid.nui-button-primary')].find(b=>{const t=(b.innerText||'').toLowerCase();return!t.includes('avaliar')&&!t.includes('experi√™ncia')});if(b&&!b.disabled){console.log('‚ñ∂Ô∏è Clicando no bot√£o Avan√ßar (filtrado)');b.click()}}function clickInitialAdvance(d=document){const b=[...d.querySelectorAll('button.nui-button.nui-button-medium.nui-button-curved.nui-button-solid.nui-button-primary')].find(b=>{const t=(b.innerText||'').toLowerCase();return!t.includes('avaliar')&&!t.includes('experi√™ncia')});if(b&&!b.disabled){console.log('‚ñ∂Ô∏è Clicando no bot√£o inicial Avan√ßar (filtrado)');b.click();return!0}return!1}function refresh(d=document){if(clickInitialAdvance(d))return;const rows=extractRows(d);if(!rows.length){const box=createBox(d);box.innerHTML='<b>‚úÖ H5P:</b><br><i>Nada encontrado.</i>';return}autoAnswer(rows,d);setTimeout(()=>autoClickNext(d),1500);const box=createBox(d);let html='<b>‚úÖ H5P:</b><br><table style="width:100%;font-size:12px;">';rows.forEach(r=>{html+=`<tr><td>${r.correct?'‚úÖ':'‚ùå'}</td><td>${r.letter}</td><td>${r.text}</td></tr>`});html+='</table>';box.innerHTML=html}function scanIframe(){document.querySelectorAll('iframe').forEach(f=>{try{const d=f.contentDocument;if(!d)return;refresh(d);d.addEventListener('DOMContentLoaded',()=>refresh(d));console.log('üîÑ Injetado em iframe (same-origin)')}catch(e){console.warn('‚ö†Ô∏è Iframe bloqueado por CORS:',e)}})}function init(){console.log('üß† Script H5P ativo em:',location.href);refresh(document);setInterval(()=>refresh(document),2000);setInterval(scanIframe,3000)}init()})();
