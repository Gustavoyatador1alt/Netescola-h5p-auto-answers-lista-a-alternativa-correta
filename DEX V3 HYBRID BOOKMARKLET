javascript:(function()%7B%2F%2F %3D%3DUserScript%3D%3D%0A%2F%2F %40name         DEX V3 (suporte base64 imagens)%0A%2F%2F %40namespace    http%3A%2F%2Ftampermonkey.net%2F%0A%2F%2F %40version      3.6%0A%2F%2F %40description  Marca respostas corretas (MultiChoice e SingleChoice) incluindo alternativas que usam imagens em data%3Aimage%2Fbase64 e avan√ßa automaticamente no H5P.%0A%2F%2F %40author       Gustavoyatador%0A%2F%2F %40match        https%3A%2F%2Fsergoias.portal.sagreseduca.com.br%2F*%0A%2F%2F %40match        https%3A%2F%2Fportalnetescola.educacao.go.gov.br%2F*%0A%2F%2F %40grant        none%0A%2F%2F %40run-at       document-end%0A%2F%2F %40allFrames    true%0A%2F%2F %3D%3D%2FUserScript%3D%3D%0A%0A(function () %7B%0A  'use strict'%3B%0A%0A  %2F%2F üöÄ Injetar Eruda (console visual)%0A  (function addEruda() %7B%0A    if (window.eruda) return%3B%0A    const script %3D document.createElement('script')%3B%0A    script.src %3D "https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Feruda"%3B%0A    script.onload %3D () %3D> %7B try %7B eruda.init()%3B %7D catch %7B%7D %7D%3B%0A    document.body.appendChild(script)%3B%0A  %7D)()%3B%0A%2F%2F üîß Melhor limpeza e normaliza√ß√£o de texto%0Aconst clean %3D (html) %3D> %7B%0A  if (!html) return ""%3B%0A  %2F%2F Mant√©m o conte√∫do de sup%2Fsub com marca√ß√£o visual simples%0A  let text %3D html%0A    .replace(%2F<sup>(.*%3F)<%5C%2Fsup>%2Fgi%2C "%5E(%241)")   %2F%2F transforma ¬≤¬≥‚Å∏U ‚Üí %5E(238)U%0A    .replace(%2F<sub>(.*%3F)<%5C%2Fsub>%2Fgi%2C "_(%241)")   %2F%2F subscrito (qu√≠mica)%0A    .replace(%2F<img%5B%5E>%5D%2Balt%3D"(%5B%5E"%5D*)"%5B%5E>%5D*>%2Fgi%2C " %241 ") %2F%2F imagem com alt%0A    .replace(%2F<img%5B%5E>%5D%2B>%2Fgi%2C "%5Bimg%5D")          %2F%2F imagem sem alt%0A    .replace(%2F%26nbsp%3B%2Fg%2C " ")%0A    .replace(%2F<%5B%5E>%5D*>%2Fg%2C " ")                  %2F%2F remove tags restantes%0A    .replace(%2F%5Cs%2B%2Fg%2C " ")%0A    .trim()%3B%0A  return text%3B%0A%7D%3B%0A%0Aconst tryParse %3D (s) %3D> %7B%0A  try %7B return typeof s %3D%3D%3D "string" %3F JSON.parse(s) %3A s%3B %7D%0A  catch %7B return null%3B %7D%0A%7D%3B%0A%0Aconst pullParams %3D (obj %3D %7B%7D) %3D>%0A  obj.params %26%26 (obj.params.answers %7C%7C obj.params.question) %3F obj.params %3A obj%3B%0A%0A%2F%2F üî° Normaliza texto pra compara√ß√£o robusta%0Aconst normalize %3D (s) %3D>%0A  String(s %7C%7C "")%0A    .toLowerCase()%0A    .replace(%2F%5B%5E%5Cp%7BL%7D%5Cp%7BN%7D%5E_()%5D%2B%2Fgu%2C " ") %2F%2F mant√©m letras%2C n√∫meros%2C %5E e _%0A    .replace(%2F%5Cs%2B%2Fg%2C " ")%0A    .trim()%3B%0A%0A  %2F%2F nova%3A fingerprint curta de base64 (para comparar imagens data%3A)%0A  function shortBase64(b64) %7B%0A    if (!b64 %7C%7C typeof b64 !%3D%3D 'string') return ''%3B%0A    const comma %3D b64.indexOf('%2C')%3B%0A    const payload %3D comma >%3D 0 %3F b64.slice(comma %2B 1) %3A b64%3B%0A    %2F%2F pega peda√ßos iniciais e finais para reduzir colis√µes%0A    return payload.slice(0%2C 60) %2B (payload.length > 120 %3F payload.slice(-20) %3A '')%3B%0A  %7D%0A%0A  %2F%2F üß± Caixa de status flutuante%0A  function createBox(doc %3D document) %7B%0A    let box %3D doc.getElementById('dex-box')%3B%0A    if (!box) %7B%0A      box %3D doc.createElement('div')%3B%0A      box.id %3D 'dex-box'%3B%0A      Object.assign(box.style%2C %7B%0A        position%3A 'fixed'%2C%0A        top%3A '60px'%2C%0A        left%3A '20px'%2C%0A        minWidth%3A '260px'%2C%0A        maxWidth%3A '420px'%2C%0A        background%3A '%231a1f2b'%2C%0A        color%3A '%23fff'%2C%0A        border%3A '2px solid %232c3e50'%2C%0A        borderRadius%3A '10px'%2C%0A        padding%3A '8px 12px'%2C%0A        fontSize%3A '13px'%2C%0A        lineHeight%3A '1.4'%2C%0A        zIndex%3A '999999'%2C%0A        boxShadow%3A '0 0 15px rgba(0%2C0%2C0%2C0.4)'%2C%0A        cursor%3A 'move'%2C%0A        userSelect%3A 'none'%0A      %7D)%3B%0A%0A      let isDown %3D false%2C offsetX %3D 0%2C offsetY %3D 0%3B%0A      box.addEventListener('mousedown'%2C (e) %3D> %7B%0A        isDown %3D true%3B%0A        offsetX %3D e.clientX - box.offsetLeft%3B%0A        offsetY %3D e.clientY - box.offsetTop%3B%0A      %7D)%3B%0A      doc.addEventListener('mouseup'%2C () %3D> (isDown %3D false))%3B%0A      doc.addEventListener('mousemove'%2C (e) %3D> %7B%0A        if (isDown) %7B%0A          box.style.left %3D %60%24%7Be.clientX - offsetX%7Dpx%60%3B%0A          box.style.top %3D %60%24%7Be.clientY - offsetY%7Dpx%60%3B%0A        %7D%0A      %7D)%3B%0A%0A      doc.body.appendChild(box)%3B%0A    %7D%0A    return box%3B%0A  %7D%0A%0A  %2F%2F üß© Extra√ß√£o de respostas (agora com suporte a imagens base64)%0A  function extractRows(doc %3D document) %7B%0A    const rows %3D %5B%5D%3B%0A%0A    const extractImgFromHtml %3D (html) %3D> %7B%0A      try %7B%0A        if (!html %7C%7C typeof html !%3D%3D 'string') return ''%3B%0A        %2F%2F procura data%3Aimage%2F...%3Bbase64%2CAAA...%0A        const m %3D html.match(%2Fdata%3Aimage%5C%2F%5Ba-zA-Z0-9.%2B-%5D%2B%3Bbase64%2C%5BA-Za-z0-9%2B%2F%3D%5D%2B%2F)%3B%0A        if (m) return m%5B0%5D%3B%0A        %2F%2F tamb√©m tenta extrair src de <img src%3D"...">%0A        const imgMatch %3D html.match(%2F<img%5B%5E>%5D%2Bsrc%3D%5B"'%5D(%5B%5E"'%5D%2B)%5B"'%5D%2Fi)%3B%0A        if (imgMatch) return imgMatch%5B1%5D%3B%0A        return ''%3B%0A      %7D catch (e) %7B return ''%3B %7D%0A    %7D%3B%0A%0A    const pushFromParams %3D (raw) %3D> %7B%0A      const p %3D pullParams(raw %7C%7C %7B%7D)%3B%0A      const question %3D clean(p.question %7C%7C p.prompt %7C%7C p.stem %7C%7C p.title %7C%7C "")%3B%0A      const answers %3D Array.isArray(p.answers) %3F p.answers %3A %5B%5D%3B%0A      answers.forEach((a%2C idx) %3D> %7B%0A        const correct %3D a.correct %3D%3D%3D true %7C%7C a.isCorrect %3D%3D%3D true %7C%7C a.correctAnswer %3D%3D%3D true%3B%0A        %2F%2F extrai texto e imagem (se existir)%0A        const rawHtml %3D a.text %7C%7C a.label %7C%7C a.content %7C%7C ""%3B%0A        const text %3D clean(rawHtml)%3B%0A        const img %3D extractImgFromHtml(rawHtml)%3B%0A        rows.push(%7B%0A          question%2C%0A          idx%2C%0A          letter%3A String.fromCharCode(65 %2B idx)%2C%0A          text%2C%0A          img%2C %2F%2F url ou data%3Aimage...%0A          imgHash%3A img %3F shortBase64(img) %3A ''%2C%0A          correct%2C%0A          type%3A "H5P.MultiChoice"%0A        %7D)%3B%0A      %7D)%3B%0A    %7D%3B%0A%0A    const HI %3D doc.defaultView%3F.H5PIntegration%3B%0A    if (HI%3F.contents) %7B%0A      Object.values(HI.contents).forEach((val) %3D> %7B%0A        const lib %3D String(val.library %7C%7C "").split(" ")%5B0%5D%3B%0A        if (lib %3D%3D%3D "H5P.MultiChoice") %7B%0A          const params %3D tryParse(val.jsonContent) %7C%7C val.content %7C%7C tryParse(val.params) %7C%7C null%3B%0A          pushFromParams(params)%3B%0A        %7D%0A      %7D)%3B%0A    %7D%0A%0A    const H5P %3D doc.defaultView%3F.H5P%3B%0A    if (H5P %26%26 Array.isArray(H5P.instances)) %7B%0A      H5P.instances.forEach((inst) %3D> %7B%0A        try %7B%0A          const lib %3D inst.libraryInfo%3F.machineName %7C%7C inst.library%3F.machineName %7C%7C inst%3F.constructor%3F.name%3B%0A          if (%5B"H5P.MultiChoice"%2C "H5P.SingleChoice"%5D.includes(lib)) %7B%0A            const params %3D inst.options %7C%7C inst.params %7C%7C inst.contentData%3F.params %7C%7C %7B%7D%3B%0A            pushFromParams(params)%3B%0A          %7D%0A        %7D catch (e) %7B %2F* ignore instance parse errors *%2F %7D%0A      %7D)%3B%0A    %7D%0A%0A    %2F%2F Adi√ß√£o de suporte a <li class%3D"h5p-sc-alternative ..."> (DOM)%0A    doc.querySelectorAll("li.h5p-sc-alternative").forEach((li%2C i) %3D> %7B%0A      const correct %3D li.classList.contains("h5p-sc-is-correct")%3B%0A      const rawHtml %3D li.innerHTML %7C%7C li.textContent %7C%7C ''%3B%0A      %2F%2F pega imagem se existir%0A      const imgNode %3D li.querySelector('img')%3B%0A      const img %3D imgNode %3F (imgNode.src %7C%7C '') %3A (rawHtml.includes('data%3Aimage') %3F (rawHtml.match(%2Fdata%3Aimage%5C%2F%5Ba-zA-Z0-9.%2B-%5D%2B%3Bbase64%2C%5BA-Za-z0-9%2B%2F%3D%5D%2B%2F)%3F.%5B0%5D%7C%7C'') %3A '')%3B%0A      rows.push(%7B%0A        question%3A "SingleChoice (DOM)"%2C%0A        idx%3A i%2C%0A        letter%3A String.fromCharCode(65 %2B i)%2C%0A        text%3A clean(li.innerText %7C%7C "")%2C%0A        img%2C%0A        imgHash%3A img %3F shortBase64(img) %3A ''%2C%0A        correct%2C%0A        el%3A li%2C %2F%2F guarda refer√™ncia ao elemento DOM para clique direto%0A        type%3A "H5P.SingleChoice"%0A      %7D)%3B%0A    %7D)%3B%0A%0A    return rows%3B%0A  %7D%0A%0A%2F%2F ... (c√≥digo anterior)%0A%0A%C2%A0 %2F%2F üß† Marca respostas corretas automaticamente (agora com matching por √≠ndice%2C imagem e texto)%0A%C2%A0 function autoAnswer(rows%2C doc %3D document) %7B%0A%C2%A0 %C2%A0 %2F%2F Se tiver dados vindos do extractRows()%0A%C2%A0 %C2%A0 if (rows %26%26 rows.length > 0) %7B%0A%C2%A0 %C2%A0 %C2%A0 rows%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 .filter(r %3D> r.correct)%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 .forEach(r %3D> %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 let matched %3D false%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const alternatives %3D Array.from(doc.querySelectorAll('.h5p-sc-alternative%2C .h5p-answer%2C li%5Brole%3D"radio"%5D%2C .h5p-single-choice-wrapper ul > li'))%3B%0A%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F 1) ‚ö° PRIORIDADE%3A Match por √çNDICE (O mais r√°pido e robusto)%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (r.idx !%3D%3D undefined %26%26 alternatives.length > r.idx) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const el %3D alternatives%5Br.idx%5D%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (el %26%26 el instanceof Element) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 el.dispatchEvent(new MouseEvent('click'%2C %7B bubbles%3A true%2C cancelable%3A true %7D))%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 matched %3D true%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F 2) üñº%EF%B8%8F FALLBACK%3A Match por IMAGEM%2FBase64 (Se falhou por √≠ndice)%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (!matched %26%26 r.imgHash) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const imgs %3D Array.from(doc.querySelectorAll('.h5p-sc-alternative%2C .h5p-answer%2C li%2C img'))%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 for (const candidate of imgs) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 try %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F Se for <img> direto%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (candidate.tagName %26%26 candidate.tagName.toLowerCase() %3D%3D%3D 'img') %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const src %3D candidate.src %7C%7C ''%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (src %26%26 shortBase64(src) %3D%3D%3D r.imgHash) %7B candidate.click()%3B matched %3D true%3B break%3B %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D else %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F procurar img dentro do candidate%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const imgNode %3D candidate.querySelector %26%26 candidate.querySelector('img')%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const src %3D imgNode %3F imgNode.src %3A (candidate.innerHTML %7C%7C '').match(%2Fdata%3Aimage%5C%2F%5Ba-zA-Z0-9.%2B-%5D%2B%3Bbase64%2C%5BA-Za-z0-9%2B%2F%3D%5D%2B%2F)%3F.%5B0%5D %7C%7C ''%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (src %26%26 shortBase64(src) %3D%3D%3D r.imgHash) %7B candidate.dispatchEvent(new MouseEvent('click'%2C %7B bubbles%3A true%2C cancelable%3A true %7D))%3B matched %3D true%3B break%3B %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D catch (e) %7B%7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F 3) üìÑ √öLTIMO FALLBACK%3A Match por TEXTO (Menos confi√°vel)%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (!matched %26%26 r.text) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const el %3D alternatives%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 .find(e %3D> %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 try %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 const t %3D e.innerText %7C%7C ''%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F A busca deve ser feita pelo texto limpo da resposta no JSON%2FAPI%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 return t %26%26 normalize(t).includes(normalize(r.text))%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D catch (e) %7B return false%3B %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D)%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (el) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 el.dispatchEvent(new MouseEvent('click'%2C %7B bubbles%3A true%2C cancelable%3A true %7D))%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 matched %3D true%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %2F%2F Log de resultado%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 if (!matched) %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 console.warn(%60‚ö†%EF%B8%8F N√£o achou alternativa%3A %5B%24%7Br.idx%7D%5D %24%7Br.text %7C%7C r.imgHash%7D%60)%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D else %7B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 console.log(%60‚úÖ Marcou correta (Match%3A %24%7Br.idx !%3D%3D undefined %3F '√çndice' %3A r.imgHash %3F 'Imagem' %3A 'Texto'%7D)%3A %24%7Br.text %7C%7C r.imgHash%7D%60)%3B%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D%0A%C2%A0 %C2%A0 %C2%A0 %C2%A0 %7D)%3B%0A%C2%A0 %C2%A0 %7D%0A%0A    %2F%2F Caso ainda exista .h5p-sc-is-correct no DOM%2C garante o clique%0A    const correctEls %3D doc.querySelectorAll('.h5p-sc-alternative.h5p-sc-is-correct%2C .h5p-answer.correct')%3B%0A    if (correctEls.length > 0) %7B%0A      correctEls.forEach(el %3D>%0A        el.dispatchEvent(new MouseEvent('click'%2C %7B bubbles%3A true%2C cancelable%3A true %7D))%0A      )%3B%0A    %7D%0A%0A    %2F%2F S√≥ clica no bot√£o se ele existir%0A    const checkBtn %3D doc.querySelector(".h5p-question-check-answer%2C .h5p-multi-choice-submit%2C .h5p-sc-next%2C button%5Bdata-check%5D%2C button%5Btype%3D'submit'%5D")%3B%0A    if (checkBtn %26%26 !checkBtn.disabled) %7B%0A      try %7B checkBtn.click()%3B %7D catch (e) %7B%7D%0A    %7D%0A  %7D%0A%0A  %2F%2F ‚ñ∂%EF%B8%8F Clicar no bot√£o Avan√ßar%0A  function autoClickNext(doc %3D document) %7B%0A    %2F%2F responded() pode n√£o existir no teu script%3B considera remover ou substituir com verifica√ß√£o simples%0A    %2F%2F if (!responded(doc)) return%3B%0A    const nextBtn %3D Array.from(%0A      doc.querySelectorAll("button.nui-button.nui-button-medium.nui-button-curved.nui-button-solid.nui-button-primary%2C button")%0A    ).find(b %3D> %7B%0A      try %7B%0A        const txt %3D (b.innerText %7C%7C '').toLowerCase()%3B%0A        if (!txt) return false%3B%0A        if (txt.includes("avaliar") %7C%7C txt.includes("experi√™ncia")) return false%3B%0A        return %2Favan√ßar%7Cpr√≥xima%7Cpr√≥ximo%7Ccontinuar%7Cnext%7Cprosseguir%7Cseguinte%7Cconcluir%7Cfinalizar%7Cenviar%7Cavancar%2Fi.test(txt)%3B%0A      %7D catch (e) %7B return false%3B %7D%0A    %7D)%3B%0A%0A    if (nextBtn %26%26 !nextBtn.disabled) %7B%0A      console.log("‚ñ∂%EF%B8%8F Clicando no bot√£o Avan√ßar (filtrado)")%3B%0A      try %7B nextBtn.click()%3B %7D catch (e) %7B%0A        %2F%2F fallback%3A despacha eventos simulados%0A        %5B"mousedown"%2C"mouseup"%2C"click"%5D.forEach(evt %3D> nextBtn.dispatchEvent(new MouseEvent(evt%2C %7B bubbles%3A true%2C cancelable%3A true %7D)))%3B%0A      %7D%0A    %7D%0A  %7D%0A%0A  function clickInitialAdvance(doc %3D document) %7B%0A    const btn %3D Array.from(%0A      doc.querySelectorAll("button.nui-button.nui-button-medium.nui-button-curved.nui-button-solid.nui-button-primary%2C button")%0A    ).find(b %3D> %7B%0A      try %7B%0A        const txt %3D (b.innerText %7C%7C '').toLowerCase()%3B%0A        if (!txt) return false%3B%0A        if (txt.includes("avaliar") %7C%7C txt.includes("experi√™ncia")) return false%3B%0A        return %2Favan√ßar%7Cpr√≥xima%7Cpr√≥ximo%7Ccontinuar%7Cnext%7Cprosseguir%7Cseguinte%7Cconcluir%7Cfinalizar%7Cenviar%7Cavancar%2Fi.test(txt)%3B%0A      %7D catch (e) %7B return false%3B %7D%0A    %7D)%3B%0A%0A    if (btn %26%26 !btn.disabled) %7B%0A      console.log("‚ñ∂%EF%B8%8F Clicando no bot√£o inicial Avan√ßar (filtrado)")%3B%0A      try %7B btn.click()%3B %7D catch (e) %7B%7D%0A      return true%3B%0A    %7D%0A    return false%3B%0A  %7D%0A%0A  %2F%2F üîÅ Atualiza a interface e marca respostas%0A  function refresh(doc %3D document) %7B%0A    if (clickInitialAdvance(doc)) return%3B%0A    const rows %3D extractRows(doc)%3B%0A    const box %3D createBox(doc)%3B%0A%0A    if (!rows.length) %7B%0A      box.innerHTML %3D "<b>‚úÖ H5P%3A<%2Fb><br><i>Nenhuma quest√£o encontrada.<%2Fi>"%3B%0A      return%3B%0A    %7D%0A%0A    autoAnswer(rows%2C doc)%3B%0A    setTimeout(() %3D> autoClickNext(doc)%2C 700)%3B%0A%0A    rows.sort((a%2C b) %3D> a.letter.localeCompare(b.letter))%3B%0A    let html %3D "<b>‚úÖ H5P Detectado%3A<%2Fb><br><table style%3D'width%3A100%25%3B font-size%3A12px%3B'>"%3B%0A    rows.forEach((r) %3D> %7B%0A      const dispText %3D r.text %7C%7C (r.img %3F %60%5Bimagem%5D%60 %3A '')%3B%0A      html %2B%3D %60<tr><td>%24%7Br.correct %3F "‚úÖ" %3A "‚ùå"%7D<%2Ftd><td>%24%7Br.letter%7D)<%2Ftd><td>%24%7BdispText%7D<%2Ftd><td style%3D"opacity%3A0.6%3B">(%24%7Br.type%7D)<%2Ftd><%2Ftr>%60%3B%0A    %7D)%3B%0A    html %2B%3D "<%2Ftable>"%3B%0A    box.innerHTML %3D html%3B%0A  %7D%0A%0A  function scanIframe() %7B%0A    document.querySelectorAll("iframe").forEach((frame) %3D> %7B%0A      try %7B%0A        const doc %3D frame.contentDocument%3B%0A        if (!doc) return%3B%0A        refresh(doc)%3B%0A        doc.addEventListener("DOMContentLoaded"%2C () %3D> refresh(doc))%3B%0A        console.log("üîÑ Injetado em iframe (same-origin)")%3B%0A      %7D catch (e) %7B%0A        console.warn("‚ö†%EF%B8%8F Iframe bloqueado por CORS%3A"%2C e)%3B%0A      %7D%0A    %7D)%3B%0A  %7D%0A%0A  %2F%2F üöÄ Inicializa√ß√£o%0A  function init() %7B%0A    console.log("üß† Script H5P ativo em%3A"%2C location.href)%3B%0A    refresh(document)%3B%0A    setInterval(() %3D> refresh(document)%2C 1000)%3B%0A    setInterval(scanIframe%2C 1500)%3B%0A  %7D%0A%0A  init()%3B%0A%7D)()%3B%7D)()%3B
